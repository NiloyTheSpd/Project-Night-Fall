<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800" style="background:#ffffff">
  <style>
    .board { fill:#f2f7ff; stroke:#2a6bf2; stroke-width:2; }
    .module { fill:#fff7f2; stroke:#f2852a; stroke-width:2; }
    .sensor { fill:#f7fff2; stroke:#38a169; stroke-width:2; }
    .label { font-family: Arial, sans-serif; font-size:14px; fill:#111; }
    .title { font-family: Arial, sans-serif; font-size:18px; font-weight:bold; fill:#111; }
    .wire { stroke:#555; stroke-width:2; }
    .wire5v { stroke:#e11d48; stroke-width:3; }
    .wiregnd { stroke:#111827; stroke-width:3; stroke-dasharray:4,4; }
  </style>

  <!-- Titles -->
  <text class="title" x="50" y="40">Project Nightfall Wiring Diagram</text>
  <text class="label" x="50" y="65">Strap-pin safe mapping (GPIO0/2/12/15 avoided), Echo dividers on 18/21</text>

  <!-- Power / Ground -->
  <rect class="module" x="50" y="100" width="220" height="80" />
  <text class="title" x="60" y="125">Buck 12V → 5V</text>
  <text class="label" x="60" y="145">5V @ ≥5A</text>
  <text class="label" x="60" y="165">Feeds Back, Front, CAM, HC-SR04, MQ-2</text>

  <!-- Common Ground Bus -->
  <rect class="module" x="50" y="200" width="220" height="50" />
  <text class="title" x="60" y="230">Common Ground Bus</text>

  <!-- Boards -->
  <rect class="board" x="340" y="90" width="270" height="220" />
  <text class="title" x="350" y="115">Back ESP32 (Master)</text>
  <text class="label" x="350" y="140">Motors L298N A/B</text>
  <text class="label" x="350" y="160">Ultrasonic Front: TRIG 14, ECHO 18</text>
  <text class="label" x="350" y="180">Ultrasonic Rear:  TRIG 19, ECHO 21</text>
  <text class="label" x="350" y="200">MQ-2: Analog 32, Digital 33</text>
  <text class="label" x="350" y="220">Encoders: RL 16/17, RR 34/35</text>

  <rect class="board" x="340" y="360" width="270" height="220" />
  <text class="title" x="350" y="385">Front ESP32 (Motor Slave)</text>
  <text class="label" x="350" y="410">Driver #1: M1 13/23/22, M2 25/26/27</text>
  <text class="label" x="350" y="430">Driver #2: M3 14/32/33, M4 15/19/21</text>

  <rect class="board" x="700" y="90" width="260" height="140" />
  <text class="title" x="710" y="115">ESP32-CAM (Client)</text>
  <text class="label" x="710" y="140">Status LED: 33</text>
  <text class="label" x="710" y="160">Flash LED: 4</text>
  <text class="label" x="710" y="180">FTDI: TX→RX0(3), RX→TX0(1), GPIO0 for upload</text>

  <!-- L298N modules -->
  <rect class="module" x="700" y="260" width="220" height="90" />
  <text class="title" x="710" y="285">L298N (Rear)</text>
  <text class="label" x="710" y="305">Left ENA 13, IN1 23, IN2 22</text>
  <text class="label" x="710" y="325">Right ENB 25, IN3 26, IN4 27</text>

  <rect class="module" x="700" y="370" width="220" height="120" />
  <text class="title" x="710" y="395">L298N #1 (Front)</text>
  <text class="label" x="710" y="415">M1 ENA 13, IN1 23, IN2 22</text>
  <text class="label" x="710" y="435">M2 ENB 25, IN3 26, IN4 27</text>

  <rect class="module" x="950" y="370" width="220" height="120" />
  <text class="title" x="960" y="395">L298N #2 (Front)</text>
  <text class="label" x="960" y="415">M3 ENA 14, IN1 32, IN2 33</text>
  <text class="label" x="960" y="435">M4 ENB 15, IN3 19, IN4 21</text>

  <!-- Sensors -->
  <rect class="sensor" x="700" y="520" width="220" height="80" />
  <text class="title" x="710" y="545">HC-SR04 Front</text>
  <text class="label" x="710" y="565">TRIG 14, ECHO 18 (divider to 3.3V)</text>

  <rect class="sensor" x="950" y="520" width="220" height="80" />
  <text class="title" x="960" y="545">HC-SR04 Rear</text>
  <text class="label" x="960" y="565">TRIG 19, ECHO 21 (divider to 3.3V)</text>

  <rect class="sensor" x="700" y="620" width="220" height="80" />
  <text class="title" x="710" y="645">MQ-2 Gas</text>
  <text class="label" x="710" y="665">Analog 32, Digital 33, VCC 5V</text>

  <!-- Power wires (schematic-level) -->
  <line class="wire5v" x1="270" y1="140" x2="340" y2="140" />
  <line class="wire5v" x1="270" y1="140" x2="340" y2="410" />
  <line class="wire5v" x1="270" y1="140" x2="700" y2="120" />

  <line class="wiregnd" x1="270" y1="225" x2="340" y2="190" />
  <line class="wiregnd" x1="270" y1="225" x2="340" y2="460" />
  <line class="wiregnd" x1="270" y1="225" x2="700" y2="160" />

  <!-- Notes -->
  <text class="label" x="50" y="740">Notes: Avoid biasing strap pins at boot. Use voltage dividers on Echo lines. Ensure common ground across all modules.</text>
</svg>
